x = expression(paste(italic('in-situ'), ' median water temp (deg C)'))) +
final_theme
val_mean_ls <- lm(validation_IQR$surface_temp_median ~ validation_IQR$temp_med)
summary(val_mean_ls)
val_mean_dem <-deming::deming(validation_IQR$surface_temp_median ~ validation_IQR$temp_med)
val_mean_dem
cor(validation_IQR$surface_temp_median, validation_IQR$temp_med)
ggplot(validation_IQR, aes(x = temp_med, y = surface_temp_median)) +
geom_point() +
geom_abline(intercept = val_mean_dem$coefficients[1], slope = val_mean_dem$coefficients[2], color = 'blue') +
geom_abline(intercept = val_mean_dem$ci[1,1], slope = val_mean_dem$ci[2,1], color = 'blue', linetype = 2) +
geom_abline(intercept = val_mean_dem$ci[1,2], slope = val_mean_dem$ci[2,2], color = 'blue', linetype = 2) +
geom_abline(intercept = 0, slope = 1) +
coord_cartesian(xlim = c(7,27),
ylim = c(7,27)) +
labs(y = 'satellite-derived median\nskin temperature (deg C)',
x = expression(paste(italic('in-situ'), ' median water temp (deg C)'))) +
final_theme
ggsave(paste0(figdir, 'deming_reg_median_IQR_v23Sept2021.jpg'), height = 5, width = 5, units = 'in')
validation_IQR$pred_temp = val_mean_dem$coefficients[1] + val_mean_dem$coefficients[2]*validation_IQR$temp_med
lst_insitu_dem_forresid = mcreg(x = validation_IQR$temp_med, y = validation_IQR$surface_temp_median, method.reg = 'Deming')
validation_IQR$opt_resid = MCResult.getResiduals(lst_insitu_dem_forresid)$optimized
#plot to make sure prediction is correct
ggplot(validation_IQR, aes(x = temp_med, y = pred_temp))+
geom_point(color = 'blue') +
geom_point(aes(x = temp_med, y = surface_temp_median))
lst_filt_maxIQR <- lst_filt_maxIQR %>%
mutate(calib_IQE_med_temp_degC = (surface_temp_median-val_mean_dem$coefficients[1])/val_mean_dem$coefficients[2])
lst_filt_maxIQR <- lst_filt_maxIQR %>%
mutate(calib_IQR_med_temp_degC = (surface_temp_median-val_mean_dem$coefficients[1])/val_mean_dem$coefficients[2])
lst_filt_maxrange %>%
select(date, LSmission, temp_spread, pct_lake, surface_temp_count:surface_temp_stdDev, calib_IQR_range_med_temp_degC) %>%
write.csv(file.path(datadir, 'LS_passQAQC_v24Sept2021.csv'), row.names = F)
lst_filt_maxIQR <- lst_filt_maxIQR %>%
mutate(calib_IQR_med_temp_degC = (surface_temp_median-val_mean_dem$coefficients[1])/val_mean_dem$coefficients[2])
lst_filt_maxrange %>%
select(date, LSmission, temp_spread, pct_lake, surface_temp_count:surface_temp_stdDev, calib_IQR_range_med_temp_degC) %>%
write.csv(file.path(datadir, 'LS_passQAQC_v24Sept2021.csv'), row.names = F)
lst_filt_maxIQR %>%
select(date, LSmission, temp_spread, pct_lake, surface_temp_count:surface_temp_stdDev, calib_IQR_range_med_temp_degC) %>%
write.csv(file.path(datadir, 'LS_IQR_passQAQC_v24Sept2021.csv'), row.names = F)
lst_filt_maxIQR %>%
select(date, LSmission, temp_spread, pct_lake, surface_temp_count:surface_temp_stdDev, calib_IQR_med_temp_degC) %>%
write.csv(file.path(datadir, 'LS_IQR_passQAQC_v24Sept2021.csv'), row.names = F)
lst_filt_maxIQR %>%
select(date, LSmission, IQR_spread, pct_lake, surface_temp_count:surface_temp_stdDev, calib_IQR_med_temp_degC) %>%
write.csv(file.path(datadir, 'LS_IQR_passQAQC_v24Sept2021.csv'), row.names = F)
View(lst_filt_maxIQR)
lst_filt_maxIQR %>%
select(date, LSmission, IQR, pct_lake, surface_temp_count:surface_temp_stdDev, calib_IQR_med_temp_degC) %>%
write.csv(file.path(datadir, 'LS_IQR_passQAQC_v24Sept2021.csv'), row.names = F)
#plot to make sure calibration is correct
lst_filt_mod_select_IQR_calib <- lst_filt_maxIQR %>%
select(date:IQR, calib_IQR_med_temp_degC)
validation_IQR_calib <- lst_paired %>%
mutate(date = as.Date(substrRight(scene, 8), '%Y%m%d')) %>%
inner_join(., lst_filt_mod_select_IQR_calib)
ggplot(validation_IQR_calib, aes(x = temp_med, y = surface_temp_median)) +
geom_point() +
geom_point(aes(x = temp_med, y = calib_IQR_med_temp_degC), color = 'red')+
geom_abline(intercept = val_mean_dem$coefficients[1], slope = val_mean_dem$coefficients[2], color = 'blue') +
geom_abline(intercept = val_mean_dem$ci[1,1], slope = val_mean_dem$ci[2,1], color = 'blue', linetype = 2) +
geom_abline(intercept = val_mean_dem$ci[1,2], slope = val_mean_dem$ci[2,2], color = 'blue', linetype = 2) +
geom_abline(intercept = 0, slope = 1) +
coord_cartesian(xlim = c(7,27),
ylim = c(7,27)) +
labs(y = 'satellite-derived median\nskin temperature (deg C)',
x = expression(paste(italic('in-situ'), ' median water temp (deg C)'))) +
final_theme
#point to directories
C1_datadir <- 'data/colab-output/2021-06-08/'
C2_datadir <- 'data/colab-output/C2/'
#point to directories
datadir <- 'data/'
# read in C1 and C2 data
C1SC <- read_csv(file.path(C1_datadir, 'LS_passQAQC_24Sept2021.csv'))
library(readxl)
# read in C1 and C2 data
C1SC <- read_csv(file.path(C1_datadir, 'LS_passQAQC_24Sept2021.csv'))
library(readxl)
# read in C1 and C2 data
C1SC <- read_csv(file.path(C1_datadir, 'LS_passQAQC_24Sept2021.csv'))
library(readxl)
# read in C1 and C2 data
C1SC <- read_excel(file.path(C1_datadir, 'LS_passQAQC_24Sept2021.csv'))
#point to directories
datadir <- 'data/'
# read in C1 and C2 data
C1SC <- read_excel(file.path(datadir, 'LS_passQAQC_24Sept2021.csv'))
# read in C1 and C2 data
C1SC <- read_csv(file.path(datadir, 'LS_passQAQC_24Sept2021.csv'))
library(readr)
# read in C1 and C2 data
C1SC <- read_csv(file.path(datadir, 'LS_passQAQC_24Sept2021.csv'))
# read in C1 and C2 data
C1SC <- read_csv(file.path(datadir, 'LS_passQAQC_v24Sept2021.csv'))
C2 <- read_csv(file.path(C2_datadir, 'sunapee_1985_2020_C2_stats.csv'))
#load libraries
library(tidyr)
# read in C1 and C2 data
C1SC <- read_csv(file.path(datadir, 'LS_passQAQC_v24Sept2021.csv')) %>%
mutate(source = 'C1SC') %>%
select(-calib_range_med_temp_degC) %>%
pivot_longer(cols = c(pixel_count:temp_stdDev),
names_to = 'variable',
values_to = 'value')
# read in C1 and C2 data
C1SC <- read_csv(file.path(datadir, 'LS_passQAQC_v24Sept2021.csv')) %>%
mutate(source = 'C1SC') %>%
dplyr::select(-calib_range_med_temp_degC) %>%
pivot_longer(cols = c(pixel_count:temp_stdDev),
names_to = 'variable',
values_to = 'value')
# read in C1 and C2 data
C1SC <- read_csv(file.path(datadir, 'LS_passQAQC_v24Sept2021.csv')) %>%
dplyr::mutate(source = 'C1SC') %>%
dplyr::select(-calib_range_med_temp_degC) %>%
pivot_longer(cols = c(pixel_count:temp_stdDev),
names_to = 'variable',
values_to = 'value')
# read in C1 and C2 data
C1SC <- read_csv(file.path(datadir, 'LS_passQAQC_v24Sept2021.csv')) %>%
dplyr::mutate(source = 'C1SC') %>%
dplyr::select(-calib_range_med_temp_degC, -temp_spread) %>%
pivot_longer(cols = c(pct_lake:temp_stdDev),
names_to = 'variable',
values_to = 'value')
# read in C1 and C2 data
C1SC <- read_csv(file.path(datadir, 'LS_passQAQC_v24Sept2021.csv')) %>%
dplyr::mutate(source = 'C1SC') %>%
dplyr::select(-calib_range_med_temp_degC, -temp_spread) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable',
values_to = 'value')
head(C1SC)
C2 <- read_csv(file.path(C2_datadir, 'sunapee_1985_2020_C2_stats.csv'))
# read in C1 and C2 data
C1SC <- read_csv(file.path(datadir, 'LS_passQAQC_v24Sept2021.csv'))
C1SC_vert <- C1SC%>%
dplyr::mutate(source = 'C1SC') %>%
dplyr::select(-calib_range_med_temp_degC, -temp_spread) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable',
values_to = 'value')
head(C1SC)
C2 <- read_csv(file.path(C2_datadir, 'sunapee_1985_2020_C2_stats.csv'))
head(C2)
#functions
substrRight <- function(x, n){
substr(x, nchar(x)-n+1, nchar(x))
}
View(C2)
C2_vert <- C2 %>%
mutate(date = substrRight(`system:index`, 8))
C2_vert <- C2 %>%
dplyr::mutate(date = substrRight(`system:index`, 8))
View(C2_vert)
C2_vert <- C2 %>%
dplyr::mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d'))
View(C2)
View(C1SC_vert)
C2_vert <- C2 %>%
dplyr::mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
dplyr::mutate(mission = case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_))
C2_vert <- C2 %>%
dplyr::mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
dplyr::mutate(mission = dplyr::case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_))
C2_vert <- C2 %>%
dplyr::mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
dplyr::mutate(mission = dplyr::case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
dplyr::select(date, mission, pixel_count:surface_temp_stdDev)
C2_vert <- C2 %>%
dplyr::mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
dplyr::mutate(mission = dplyr::case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
dplyr::select(date, mission, pixel_count:temp_stdDev)
C2_vert <- C2 %>%
dplyr::mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
dplyr::mutate(mission = dplyr::case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
dplyr::mutate(pct_lake = (pixel_count/23598)*100) %>%
dplyr::select(date, mission, pct_lake, temp_max:temp_stdDev)
C2_vert <- C2 %>%
dplyr::mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
dplyr::mutate(mission = dplyr::case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
dplyr::mutate(pct_lake = (pixel_count/23598)*100) %>%
dplyr::select(date, mission, pct_lake, temp_max:temp_stdDev) %>%
rename_at(vars(temp_max:temp_stdDev),
~ paste('surface', ., sep = '_'))
C2_vert <- C2 %>%
dplyr::mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
dplyr::mutate(mission = dplyr::case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
dplyr::mutate(pct_lake = (pixel_count/23598)*100) %>%
dplyr::select(date, mission, pct_lake, temp_max:temp_stdDev) %>%
dplur::rename_at(vars(temp_max:temp_stdDev),
~ paste('surface', ., sep = '_'))
C2_vert <- C2 %>%
dplyr::mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
dplyr::mutate(mission = dplyr::case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
dplyr::mutate(pct_lake = (pixel_count/23598)*100) %>%
dplyr::select(date, mission, pct_lake, temp_max:temp_stdDev) %>%
dplyr::rename_at(vars(temp_max:temp_stdDev),
~ paste('surface', ., sep = '_'))
colnames(C2_vert)
C2_vert <- C2 %>%
dplyr::mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
dplyr::mutate(mission = dplyr::case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
dplyr::mutate(pct_lake = (pixel_count/23598)*100) %>%
dplyr::select(date, mission, pct_lake, temp_max:temp_stdDev) %>%
dplyr::rename_at(vars('temp_max', 'temp_mean', 'temp_median', 'temp_min', 'temp_p25', 'temp_p75', 'temp_skew', 'temp_stdDev'),
~ paste('surface', ., sep = '_'))
C2_vert <- C2 %>%
dplyr::mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
dplyr::mutate(mission = dplyr::case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
dplyr::mutate(pct_lake = (pixel_count/23598)*100) %>%
dplyr::select(date, mission, pct_lake, temp_max:temp_stdDev) %>%
dplyr::rename_at(dplyr::vars('temp_max', 'temp_mean', 'temp_median', 'temp_min', 'temp_p25', 'temp_p75', 'temp_skew', 'temp_stdDev'),
~ paste('surface', ., sep = '_'))
C2_vert <- C2 %>%
dplyr::mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
dplyr::mutate(mission = dplyr::case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
dplyr::mutate(pct_lake = (pixel_count/23598)*100) %>%
dplyr::select(date, mission, pct_lake, temp_max:temp_stdDev) %>%
dplyr::rename_at(dplyr::vars('temp_max', 'temp_mean', 'temp_median', 'temp_min', 'temp_p25', 'temp_p75', 'temp_skew', 'temp_stdDev'),
~ paste('surface', ., sep = '_')) %>%
pivot_longer(cols = c(pct_lake:surface_temp_std_Dev),
names_to = 'variable',
values_to = 'value')
C2_vert <- C2 %>%
dplyr::mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
dplyr::mutate(mission = dplyr::case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
dplyr::mutate(pct_lake = (pixel_count/23598)*100) %>%
dplyr::select(date, mission, pct_lake, temp_max:temp_stdDev) %>%
dplyr::rename_at(dplyr::vars('temp_max', 'temp_mean', 'temp_median', 'temp_min', 'temp_p25', 'temp_p75', 'temp_skew', 'temp_stdDev'),
~ paste('surface', ., sep = '_')) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable',
values_to = 'value')
C2_vert <- C2 %>%
dplyr::mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
dplyr::mutate(mission = dplyr::case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
dplyr::mutate(pct_lake = (pixel_count/23598)*100) %>%
dplyr::select(date, mission, pct_lake, temp_max:temp_stdDev) %>%
dplyr::rename_at(dplyr::vars('temp_max', 'temp_mean', 'temp_median', 'temp_min', 'temp_p25', 'temp_p75', 'temp_skew', 'temp_stdDev'),
~ paste('surface', ., sep = '_')) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable',
values_to = 'value') %>%
dplyr::mutate(source = 'C2')
C1_C2 <- dplyr::full_join(C1SC_vert, C2_vert)
#load libraries
library(tidyverse)
View(C1_C2)
# read in C1 and C2 data
C1SC <- read_csv(file.path(datadir, 'LS_passQAQC_v24Sept2021.csv'))
head(C1SC)
C1SC_vert <- C1SC%>%
mutate(source = 'C1SC') %>%
select(-calib_range_med_temp_degC, -temp_spread) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable',
values_to = 'value_C1')
head(C1SC_vert)
C2 <- read_csv(file.path(C2_datadir, 'sunapee_1985_2020_C2_stats.csv'))
head(C2)
C2_vert <- C2 %>%
mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
mutate(LSmission = case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
mutate(pct_lake = (pixel_count/23598)*100) %>%
select(date, mission, pct_lake, temp_max:temp_stdDev) %>%
rename_at(vars('temp_max', 'temp_mean', 'temp_median', 'temp_min', 'temp_p25', 'temp_p75', 'temp_skew', 'temp_stdDev'),
~ paste('surface', ., sep = '_')) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable',
values_to = 'value_C2') %>%
mutate(source = 'C2')
C1_C2 <- full_join(C1SC_vert, C2_vert)
C2_vert <- C2 %>%
mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
mutate(LSmission = case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
mutate(pct_lake = (pixel_count/23598)*100) %>%
select(date, LSmission, pct_lake, temp_max:temp_stdDev) %>%
rename_at(vars('temp_max', 'temp_mean', 'temp_median', 'temp_min', 'temp_p25', 'temp_p75', 'temp_skew', 'temp_stdDev'),
~ paste('surface', ., sep = '_')) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable',
values_to = 'value_C2') %>%
mutate(source = 'C2')
C1_C2 <- full_join(C1SC_vert, C2_vert)
ggplot(C1_C2, aes(x = ))
ggplot(C1_C2, aes(x = value_C1, y = value_C2)) +
geom_point() +
facet_grid(variable ~ .)
C1SC_vert <- C1SC%>%
mutate(source = 'C1SC') %>%
select(-calib_range_med_temp_degC, -temp_spread) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable')
head(C1SC_vert)
C2 <- read_csv(file.path(C2_datadir, 'sunapee_1985_2020_C2_stats.csv'))
head(C2)
C2_vert <- C2 %>%
mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
mutate(LSmission = case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
mutate(pct_lake = (pixel_count/23598)*100) %>%
select(date, LSmission, pct_lake, temp_max:temp_stdDev) %>%
rename_at(vars('temp_max', 'temp_mean', 'temp_median', 'temp_min', 'temp_p25', 'temp_p75', 'temp_skew', 'temp_stdDev'),
~ paste('surface', ., sep = '_')) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable',
values_to = 'value_C2')
C1_C2 <- full_join(C1SC_vert, C2_vert)
ggplot(C1_C2, aes(x = value_C1, y = value_C2)) +
geom_point() +
facet_grid(variable ~ .)
C1SC_vert <- C1SC%>%
select(-calib_range_med_temp_degC, -temp_spread) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable',
values_to = 'value_C1')
head(C1SC_vert)
C1_C2 <- full_join(C1SC_vert, C2_vert)
ggplot(C1_C2, aes(x = value_C1, y = value_C2)) +
geom_point() +
facet_grid(variable ~ .)
ggplot(C1_C2, aes(x = value_C1, y = value_C2)) +
geom_point() +
facet_grid(variable ~ ., scales = 'free_x')
C1_C2 <- full_join(C1SC_vert, C2_vert) %>%
filter(!is.na(value_C1))
ggplot(C1_C2, aes(x = value_C1, y = value_C2)) +
geom_point()
range(C1_C2$value_C1)
range(C1_C2$value_C2)
range(C1_C2$value_C2, na.rm = T)
C1SC_vert <- C1SC%>%
select(-calib_range_med_temp_degC, -temp_spread, -surface_temp_count) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable',
values_to = 'value_C1')
head(C1SC_vert)
C2 <- read_csv(file.path(C2_datadir, 'sunapee_1985_2020_C2_stats.csv'))
head(C2)
C2_vert <- C2 %>%
mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
mutate(LSmission = case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
mutate(pct_lake = (pixel_count/23598)*100) %>%
select(date, LSmission, pct_lake, temp_max:temp_stdDev) %>%
rename_at(vars('temp_max', 'temp_mean', 'temp_median', 'temp_min', 'temp_p25', 'temp_p75', 'temp_skew', 'temp_stdDev'),
~ paste('surface', ., sep = '_')) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable',
values_to = 'value_C2')
C1_C2 <- full_join(C1SC_vert, C2_vert) %>%
filter(!is.na(value_C1))
range(C1_C2$value_C1)
range(C1_C2$value_C2, na.rm = T)
ggplot(C1_C2, aes(x = value_C1, y = value_C2)) +
geom_point()
ggplot(C1_C2, aes(x = value_C1, y = value_C2)) +
geom_point() +
facet_grid(variable ~ .)
ggplot(C1_C2, aes(x = value_C1, y = value_C2)) +
geom_point() +
facet_grid(variable ~ .) +
geom_abline(intercept = 0, slope = 1)
C2_vert <- C2 %>%
mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
mutate(LSmission = case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
mutate(pct_lake = (pixel_count/23598)) %>%
select(date, LSmission, pct_lake, temp_max:temp_stdDev) %>%
rename_at(vars('temp_max', 'temp_mean', 'temp_median', 'temp_min', 'temp_p25', 'temp_p75', 'temp_skew', 'temp_stdDev'),
~ paste('surface', ., sep = '_')) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable',
values_to = 'value_C2')
C1_C2 <- full_join(C1SC_vert, C2_vert) %>%
filter(!is.na(value_C1))
range(C1_C2$value_C1)
range(C1_C2$value_C2, na.rm = T)
ggplot(C1_C2, aes(x = value_C1, y = value_C2)) +
geom_point() +
facet_grid(variable ~ .) +
geom_abline(intercept = 0, slope = 1)
C1SC_vert <- C1SC%>%
select(-calib_range_med_temp_degC, -temp_spread, -surface_temp_count) %>%
mutate(pct_lake = pct_lake * 100) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable',
values_to = 'value_C1')
head(C1SC_vert)
C2 <- read_csv(file.path(C2_datadir, 'sunapee_1985_2020_C2_stats.csv'))
head(C2)
C2_vert <- C2 %>%
mutate(date = as.Date(substrRight(`system:index`, 8), format = '%Y%m%d')) %>%
mutate(LSmission = case_when(grepl('LT05', `system:index`) ~ 'LS 5',
grepl('LT04', `system:index`) ~ 'LS 4',
grepl('LE07', `system:index`) ~ 'LS 7',
grepl('LC08', `system:index`) ~ 'LS 8',
TRUE ~ NA_character_)) %>%
mutate(pct_lake = (pixel_count/23598)*100) %>%
select(date, LSmission, pct_lake, temp_max:temp_stdDev) %>%
rename_at(vars('temp_max', 'temp_mean', 'temp_median', 'temp_min', 'temp_p25', 'temp_p75', 'temp_skew', 'temp_stdDev'),
~ paste('surface', ., sep = '_')) %>%
pivot_longer(cols = c(pct_lake:surface_temp_stdDev),
names_to = 'variable',
values_to = 'value_C2')
C1_C2 <- full_join(C1SC_vert, C2_vert) %>%
filter(!is.na(value_C1))
range(C1_C2$value_C1)
range(C1_C2$value_C2, na.rm = T)
ggplot(C1_C2, aes(x = value_C1, y = value_C2)) +
geom_point() +
facet_grid(variable ~ .) +
geom_abline(intercept = 0, slope = 1)
View(C2)
C1_C2 %>%
filter(variable == 'surface_temp_mean' | variable == 'surface_temp_median' | variable == 'pct_lake') %>%
ggplot(., aes(x = value_C1, y = value_C2)) +
geom_point() +
facet_grid(variable ~ .) +
geom_abline(intercept = 0, slope = 1)
C1_C2 %>%
filter(variable == 'surface_temp_mean' | variable == 'surface_temp_median' | variable == 'pct_lake') %>%
ggplot(., aes(x = value_C1, y = value_C2)) +
geom_point() +
facet_grid(variable ~ .) +
geom_abline(intercept = 0, slope = 1) +
theme_bw()
C1_C2 %>%
filter(variable == 'surface_temp_mean' | variable == 'surface_temp_median' | variable == 'pct_lake') %>%
ggplot(., aes(x = value_C1, y = value_C2)) +
geom_point() +
labs(x = 'Collection 1 SC alg',
y = 'Collection 2 value') +
facet_grid(variable ~ .) +
geom_abline(intercept = 0, slope = 1) +
theme_bw()
View(C1_C2)
filter(is.na(C1_C2$value_C2))
C1_C2 %>%
filter(is.na(value_C2))
